package alTranscription;
use utf8;
use strict;
use alVariables;
use Exporter;
#use Locale;
use locale;
our @ISA = 'Exporter';
our @EXPORT = qw(&al_transcribe);

my %al_transcription_hash = (
			     'tr' => {
				      'ug' => {
					       "ئا" => "a",
					       "ئە" => "e",
					       "ا" => "a",
					       "ە" => "e",
					       "ب" => "b",
					       "پ" => "p",
					       "ت" => "t",
					       "ج" => "c",
					       "چ" => "ç",
					       "خ" => "x",
					       "د" => "d",
					       "ر" => "r",
					       "ز" => "z",
					       "ژ" => "j",
					       "س" => "s",
					       "ش" => "ş",
					       "غ" => "ğ",
					       "ف" => "f",
					       "ق" => "q",
					       "ك" => "k",
					       "گ" => "g",
					       "ڭ" => "ng",
					       "ل" => "l",
					       "م" => "m",
					       "ن" => "n",
					       "ھ" => "h",
					       "ح" => "h",
					       "ئو" => "o",
					       "ئۇ" => "u",
					       "و" => "o",
					       "ۇ" => "u",
					       "ئۆ" => "ö",
					       "ئۈ" => "ü",
					       "ۆ" => "ö",
					       "ۈ" => "ü",
					       "ۋ" => "v",
					       "ئې" => "ë",
					       "ئى" => "i",
					       "ي" => "y",
					       "ې" => "ë",
					       "ى" => "i",
					       "ء" => "",
					       "ع" => "kh",
					      },
				      'az' => {
					       "ə" => "e",
					       "e" => "ë",
					       "q" => "g",
					       "g" => "dy",
					       "Ə" => "E",
					       "E" => "Ë",
					       "Q" => "G",
					       "G" => "DY ",
					      },
				      'kk' => {
					       "ә" => "e",
					       "б" => "b",
					       "в" => "v",
					       "г" => "g",
					       "ғ" => "ğ",
					       "д" => "d",
					       "е" => "yi",
					       "ё" => "yo",
					       "ж" => "j",
					       "з" => "z",
					       "и" => "iy",
					       "і" => "i",
					       "й" => "y",
					       "к" => "k",
					       "қ" => "q",
					       "л" => "l",
					       "м" => "m",
					       "н" => "n",
					       "ң" => "ng",
					       "о" => "o",
					       "ө" => "ö",
					       "п" => "p",
					       "р" => "r",
					       "с" => "s",
					       "т" => "t",
					       "у" => "w",
					       "ү" => "ü",
					       "ұ" => "u",
					       "ф" => "f",
					       "х" => "x",
					       "һ" => "h",
					       "ц" => "ts",
					       "ч" => "ç",
					       "ш" => "ş",
					       "щ" => "çş",
					       "ъ" => "",
					       "ы" => "ı",
					       "ь" => "",
					       "э" => "ë",
					       "ю" => "yo",
					       "я" => "ya",
					       "Ә" => "E",
					       "Б" => "B",
					       "В" => "V",
					       "Г" => "G",
					       "Ғ" => "Ğ",
					       "Д" => "D",
					       "Е" => "YI ",
					       "Ё" => "YO ",
					       "Ж" => "J",
					       "З" => "Z",
					       "И" => "İY",
					       "І" => "İ",
					       "Й" => "Y",
					       "К" => "K",
					       "Қ" => "Q",
					       "Л" => "L",
					       "М" => "M",
					       "Н" => "N",
					       "Ң" => "NG ",
					       "О" => "O",
					       "Ө" => "Ö",
					       "П" => "P",
					       "Р" => "R",
					       "С" => "S",
					       "Т" => "T",
					       "У" => "W",
					       "Ү" => "Ü",
					       "Ұ" => "U",
					       "Ф" => "F",
					       "Х" => "X",
					       "Һ" => "H",
					       "Ц" => "TS ",
					       "Ч" => "Ç",
					       "Ш" => "Ş",
					       "Щ" => "ÇŞ ",
					       "Ъ" => "",
					       "Ы" => "I",
					       "Ь" => "",
					       "Э" => "Ë",
					       "Ю" => "YO ",
					       "Я" => "YA ",
					      },
				      'ckb' => {
						"ه" => "a",
						"ا" => "a",
						"ب" => "b",
						"ج" => "v",
						"چ" => "ç",
						"د" => "d",
						"ە" => "e",
						"ێ" => "e",
						"ف" => "f",
						"گ" => "g",
						"ھ" => "h",
						"ح" => "h",
						"ی" => "i",
						"ژ" => "j",
						"ک" => "k",
						"ل" => "l",
						"ڵ" => "l",
						"م" => "m",
						"ن" => "n",
						"ۆ" => "o",
						"پ" => "p",
						"ق" => "q",
						"ر" => "r",
						"ڕ" => "r",
						"س" => "s",
						"ش" => "ş",
						"ت" => "t",
						"و" => "u",
						"وو" => "u",
						"ۊ" => "ü",
						"ڤ" => "v",
						"و" => "w",
						"خ" => "x",
						"غ" => "x",
						"ی" => "y",
						"ز" => "z",
						"ع" => "",
					       },
				      'ALL' => {
						"–" => "–",
						"-" => "-",
						"\\." => ".",
						"،" => ",",
						"؛" => ";",
						"؟" => "?",
						"۰" => "0",
						"۱" => "1",
						"۲" => "2",
						"۳" => "3",
						"۴" => "4",
						"۵" => "5",
						"۶" => "6",
						"۷" => "7",
						"۸" => "8",
						"۹" => "9",
					       },
				     },
			     'ku' => {
				      'ckb' => {
						"ه" => "a",
						"ا" => "â",
						"ب" => "b",
						"ج" => "v",
						"چ" => "ç",
						"د" => "d",
						"ە" => "e",
						"ێ" => "ê",
						"ف" => "f",
						"گ" => "g",
						"ھ" => "h",
						"ح" => "h",
						"ی" => "î",
						"ژ" => "j",
						"ک" => "k",
						"ل" => "l",
						"ڵ" => "l",
						"م" => "m",
						"ن" => "n",
						"ۆ" => "o",
						"پ" => "p",
						"ق" => "q",
						"ر" => "r",
						"ڕ" => "ř",
						"س" => "s",
						"ش" => "ş",
						"ت" => "t",
						"و" => "u",
						"وو" => "û",
						"ۊ" => "ü",
						"ڤ" => "v",
						"و" => "w",
						"خ" => "x",
						"غ" => "x",
						"ی" => "y",
						"ز" => "z",
						"ع" => "",
					       },
				     },
			     'la' => {
				      'ar' => {
					       "ء" => "",
					       "آ" => "ā",
					       "أ" => "á",
					       "ؤ" => "ú",
					       "إ" => "e",
					       "ئ" => "",
					       "ا" => "a",
					       "ب" => "b",
					       "ة" => "t",
					       "ت" => "t",
					       "ث" => "th",
					       "ج" => "j",
					       "ح" => "ħ",
					       "خ" => "x",
					       "د" => "d",
					       "ذ" => "dh",
					       "ر" => "r",
					       "ڕ" => "ř",
					       "ز" => "z",
					       "س" => "s",
					       "ش" => "sh",
					       "ص" => "ṣ",
					       "ض" => "ḍ",
					       "ط" => "ţ",
					       "ظ" => "ẓ",
					       "ع" => "ʿ",
					       "غ" => "gh",
					       "ـ" => "",
					       "ف" => "f",
					       "ڤ" => "v",
					       "ق" => "q",
					       "ك" => "k",
					       "ل" => "l",
					       "ڵ" => "ľ",
					       "م" => "m",
					       "ن" => "n",
					       "ه" => "e",
					       "و" => "w",
					       "ۆ" => "o",
					       "ى" => "y",
					       "ي" => "y",
					       "ً" => "",
					       "ٔ" => "",
					       "٫" => "",
					       "ٱ" => "a",
					       "پ" => "p",
					       "چ" => "ch",
					       "ژ" => "ž",
					       "ک" => "k",
					       "گ" => "g",
					       "ھ" => "h",
					       "ۀ" => "x",
					       "ۇ" => "",
					       "ی" => "y",
					       "ێ" => "ě",
					      },
				      'he' => {
					       "א" => "a",
					       "בּ" => "b",
					       "ב" => "b",
					       "ג" => "g",
					       "ד" => "d",
					       "ה" => "h",
					       "ו" => "w",
					       "ז" => "z",
					       "ח" => "ħ",
					       "ט" => "ţ",
					       "י" => "y",
					       "ך" => "kh",
					       "כ" => "kh",
					       "ךּ" => "k",
					       "כּ" => "k",
					       "ל" => "l",
					       "מ" => "m",
					       "ם" => "m",
					       "ן" => "n",
					       "נ" => "n",
					       "ס" => "s",
					       "ע" => "ʿ",
					       "פּ" => "p",
					       "פ" => "f",
					       "ף" => "f",
					       "ץ" => "ts",
					       "צ" => "ts",
					       "ק" => "q",
					       "ר" => "r",
					       "ש" => "s",
					       "שׁ" => "sh",
					       "שׂ" => "s",
					       "תּ" => "t",
					       "ת" => "t",
					       "׳" => "",
					       "ַ" => "",
					       "ָ" => "",
					       "ֵ" => "",
					       "ֶ" => "",
					       "ִ" => "",
					       "ֹ" => "",
					       "ֹ" => "",
					       "ֻ" => "",
					       "ּ" => "",
					       "ְ" => "",
					       "ֲ" => "",
					       "ֳ" => "",
					       "ֱ" => "",
					      },
				      'am' => {
					       "ሀ" => "hä",
					       "ሁ" => "hu",
					       "ሂ" => "hi",
					       "ሃ" => "ha",
					       "ሄ" => "he",
					       "ህ" => "hı",
					       "ሆ" => "ho",
					       "ለ" => "lä",
					       "ሉ" => "lu",
					       "ሊ" => "li",
					       "ላ" => "la",
					       "ሌ" => "le",
					       "ል" => "lı",
					       "ሎ" => "lo",
					       "ሏ" => "lwa",
					       "ሐ" => "ḥä",
					       "ሑ" => "ḥu",
					       "ሒ" => "ḥi",
					       "ሓ" => "ḥa",
					       "ሔ" => "ḥe",
					       "ሕ" => "ḥı",
					       "ሖ" => "ḥo",
					       "ሗ" => "ḥwa",
					       "መ" => "mä",
					       "ሙ" => "mu",
					       "ሚ" => "mi",
					       "ማ" => "ma",
					       "ሜ" => "me",
					       "ም" => "mı",
					       "ሞ" => "mo",
					       "ሟ" => "mwa",
					       "ፙ" => "myä",
					       "ሠ" => "śä",
					       "ሡ" => "śu",
					       "ሢ" => "śi",
					       "ሣ" => "śa",
					       "ሤ" => "śe",
					       "ሥ" => "śı",
					       "ሦ" => "śo",
					       "ሧ" => "śwa",
					       "ረ" => "rä",
					       "ሩ" => "ru",
					       "ሪ" => "ri",
					       "ራ" => "ra",
					       "ሬ" => "re",
					       "ር" => "rı",
					       "ሮ" => "ro",
					       "ሯ" => "rwa",
					       "ፘ" => "ryä",
					       "ሰ" => "sä",
					       "ሱ" => "su",
					       "ሲ" => "si",
					       "ሳ" => "sa",
					       "ሴ" => "se",
					       "ስ" => "sı",
					       "ሶ" => "so",
					       "ሷ" => "swa",
					       "ቀ" => "ḳä",
					       "ቁ" => "ḳu",
					       "ቂ" => "ḳi",
					       "ቃ" => "ḳa",
					       "ቄ" => "ḳe",
					       "ቅ" => "ḳı",
					       "ቆ" => "ḳo",
					       "ቋ" => "ḳwa",
					       "በ" => "bä",
					       "ቡ" => "bu",
					       "ቢ" => "bi",
					       "ባ" => "ba",
					       "ቤ" => "be",
					       "ብ" => "bı",
					       "ቦ" => "bo",
					       "ቧ" => "bwa",
					       "ተ" => "tä",
					       "ቱ" => "tu",
					       "ቲ" => "ti",
					       "ታ" => "ta",
					       "ቴ" => "te",
					       "ት" => "tı",
					       "ቶ" => "to",
					       "ቷ" => "twa",
					       "ኀ" => "ḫä",
					       "ኁ" => "ḫu",
					       "ኂ" => "ḫi",
					       "ኃ" => "ḫa",
					       "ኄ" => "ḫe",
					       "ኅ" => "ḫı",
					       "ኆ" => "ḫo",
					       "ኋ" => "ḫwa",
					       "ነ" => "nä",
					       "ኑ" => "nu",
					       "ኒ" => "ni",
					       "ና" => "na",
					       "ኔ" => "ne",
					       "ን" => "nı",
					       "ኖ" => "no",
					       "ኗ" => "nwa",
					       "አ" => "ʾä",
					       "ኡ" => "ʾu",
					       "ኢ" => "ʾi",
					       "ኣ" => "ʾa",
					       "ኤ" => "ʾe",
					       "እ" => "ʾı",
					       "ኦ" => "ʾo",
					       "ኧ" => "ʾwa",
					       "ከ" => "kä",
					       "ኩ" => "ku",
					       "ኪ" => "ki",
					       "ካ" => "ka",
					       "ኬ" => "ke",
					       "ክ" => "kı",
					       "ኮ" => "ko",
					       "ኳ" => "kwa",
					       "ወ" => "wä",
					       "ዉ" => "wu",
					       "ዊ" => "wi",
					       "ዋ" => "wa",
					       "ዌ" => "we",
					       "ው" => "wı",
					       "ዎ" => "wo",
					       "ዐ" => "ʽä",
					       "ዑ" => "ʽu",
					       "ዒ" => "ʽi",
					       "ዓ" => "ʽa",
					       "ዔ" => "ʽe",
					       "ዕ" => "ʽı",
					       "ዖ" => "ʽo",
					       "ዘ" => "zä",
					       "ዙ" => "zu",
					       "ዚ" => "zi",
					       "ዛ" => "za",
					       "ዜ" => "ze",
					       "ዝ" => "zı",
					       "ዞ" => "zo",
					       "ዟ" => "zwa",
					       "የ" => "yä",
					       "ዩ" => "yu",
					       "ዪ" => "yi",
					       "ያ" => "ya",
					       "ዬ" => "ye",
					       "ይ" => "yı",
					       "ዮ" => "yo",
					       "ደ" => "dä",
					       "ዱ" => "du",
					       "ዲ" => "di",
					       "ዳ" => "da",
					       "ዴ" => "de",
					       "ድ" => "dı",
					       "ዶ" => "do",
					       "ዷ" => "dwa",
					       "ገ" => "gä",
					       "ጉ" => "gu",
					       "ጊ" => "gi",
					       "ጋ" => "ga",
					       "ጌ" => "ge",
					       "ግ" => "gı",
					       "ጎ" => "go",
					       "ጓ" => "gwa",
					       "ጠ" => "ṭä",
					       "ጡ" => "ṭu",
					       "ጢ" => "ṭi",
					       "ጣ" => "ṭa",
					       "ጤ" => "ṭe",
					       "ጥ" => "ṭı",
					       "ጦ" => "ṭo",
					       "ጧ" => "ṭwa",
					       "ጰ" => "p̣ä",
					       "ጱ" => "p̣u",
					       "ጲ" => "p̣i",
					       "ጳ" => "p̣a",
					       "ጴ" => "p̣e",
					       "ጵ" => "p̣ı",
					       "ጶ" => "p̣o",
					       "ጷ" => "p̣wa",
					       "ጸ" => "ṣä",
					       "ጹ" => "ṣu",
					       "ጺ" => "ṣi",
					       "ጻ" => "ṣa",
					       "ጼ" => "ṣe",
					       "ጽ" => "ṣı",
					       "ጾ" => "ṣo",
					       "ጿ" => "ṣwa",
					       "ፀ" => "ṣ́ä",
					       "ፁ" => "ṣ́u",
					       "ፂ" => "ṣ́i",
					       "ፃ" => "ṣ́a",
					       "ፄ" => "ṣ́e",
					       "ፅ" => "ṣ́ı",
					       "ፆ" => "ṣ́o",
					       "ፈ" => "fä",
					       "ፉ" => "fu",
					       "ፊ" => "fi",
					       "ፋ" => "fa",
					       "ፌ" => "fe",
					       "ፍ" => "fı",
					       "ፎ" => "fo",
					       "ፏ" => "fwa",
					       "ፚ" => "fyä",
					       "ፐ" => "pä",
					       "ፑ" => "pu",
					       "ፒ" => "pi",
					       "ፓ" => "pa",
					       "ፔ" => "pe",
					       "ፕ" => "pı",
					       "ፖ" => "po",
					       "ፗ" => "pwa",
					       "ሸ" => "šä",
					       "ሹ" => "šu",
					       "ሺ" => "ši",
					       "ሻ" => "ša",
					       "ሼ" => "še",
					       "ሽ" => "šı",
					       "ሾ" => "šo",
					       "ሿ" => "šwa",
					       "ቐ" => "ḳʰä",
					       "ቑ" => "ḳʰu",
					       "ቒ" => "ḳʰi",
					       "ቓ" => "ḳʰa",
					       "ቔ" => "ḳʰe",
					       "ቕ" => "ḳʰı",
					       "ቖ" => "ḳʰo",
					       "ቘ" => "ḳhwä",
					       "ቝ" => "ḳhwi",
					       "ቛ" => "ḳhwa",
					       "ቜ" => "ḳhwe",
					       "ቚ" => "ḳhwı",
					       "ቨ" => "vä",
					       "ቩ" => "vu",
					       "ቪ" => "vi",
					       "ቫ" => "va",
					       "ቬ" => "ve",
					       "ቭ" => "vı",
					       "ቮ" => "vo",
					       "ቯ" => "vwa",
					       "ቸ" => "čä",
					       "ቹ" => "ču",
					       "ቺ" => "či",
					       "ቻ" => "ča",
					       "ቼ" => "če",
					       "ች" => "čı",
					       "ቾ" => "čo",
					       "ቿ" => "čwa",
					       "ⶓ" => "ŋwä",
					       "ⶔ" => "ŋwi",
					       "ⶕ" => "ŋwe",
					       "ⶖ" => "ŋwı",
					       "ኘ" => "ñä",
					       "ኙ" => "ñu",
					       "ኚ" => "ñi",
					       "ኛ" => "ña",
					       "ኜ" => "ñe",
					       "ኝ" => "ñı",
					       "ኞ" => "ño",
					       "ኟ" => "ñwa",
					       "ኸ" => "xä",
					       "ኹ" => "xu",
					       "ኺ" => "xi",
					       "ኻ" => "xa",
					       "ኼ" => "xe",
					       "ኽ" => "xı",
					       "ኾ" => "xo",
					       "ዀ" => "xwä",
					       "ዂ" => "xwi",
					       "ዃ" => "xwa",
					       "ዄ" => "xwe",
					       "ዅ" => "xwı",
					       "ዠ" => "žä",
					       "ዡ" => "žu",
					       "ዢ" => "ži",
					       "ዣ" => "ža",
					       "ዤ" => "že",
					       "ዥ" => "žı",
					       "ዦ" => "žo",
					       "ዧ" => "žwa",
					       "ጀ" => "ǧä",
					       "ጁ" => "ǧu",
					       "ጂ" => "ǧi",
					       "ጃ" => "ǧa",
					       "ጄ" => "ǧe",
					       "ጅ" => "ǧı",
					       "ጆ" => "ǧo",
					       "ጇ" => "ǧwa",
					       "ጘ" => "ŋä",
					       "ጙ" => "ŋu",
					       "ጚ" => "ŋi",
					       "ጛ" => "ŋa",
					       "ጜ" => "ŋe",
					       "ጝ" => "ŋı",
					       "ጞ" => "ŋo",
					       "ጟ" => "ŋwa",
					       "ጨ" => "č̣ä",
					       "ጩ" => "č̣u",
					       "ጪ" => "č̣i",
					       "ጫ" => "č̣a",
					       "ጬ" => "č̣e",
					       "ጭ" => "č̣ı",
					       "ጮ" => "č̣o",
					       "ጯ" => "č̣wa",
					      },
				      'cyr' => {
						"А" => "A",
						"а" => "a",
						"Б" => "B",
						"б" => "b",
						"В" => "V",
						"в" => "v",
						"Г" => "G",
						"г" => "g",
						"Ґ" => "Ġ",
						"ґ" => "ġ",
						"Д" => "D",
						"д" => "d",
						"Ѓ" => "Ǵ",
						"ѓ" => "ǵ",
						"Ђ" => "Ď",
						"ђ" => "ď",
						"Е" => "E",
						"е" => "e",
						"Ё" => "Ë",
						"ё" => "ë",
						"Є" => "Ě",
						"є" => "ě",
						"Ж" => "Ž",
						"ж" => "ž",
						"З" => "Z",
						"з" => "z",
						"Ѕ" => "DZ ",
						"ѕ" => "dz",
						"И" => "I",
						"и" => "i",
						"I" => "Ì",
						"і" => "ì",
						"Ї" => "Ï",
						"ї" => "ï",
						"Й" => "J",
						"й" => "j",
						"Ј" => "Ĵ",
						"ј" => "ĵ",
						"К" => "K",
						"к" => "k",
						"Л" => "L",
						"л" => "l",
						"Љ" => "Ľ",
						"љ" => "ľ",
						"М" => "M",
						"м" => "m",
						"Н" => "N",
						"н" => "n",
						"Њ" => "Ň",
						"њ" => "ň",
						"О" => "O",
						"о" => "o",
						"П" => "P",
						"п" => "p",
						"Р" => "R",
						"р" => "r",
						"С" => "S",
						"с" => "s",
						"Т" => "T",
						"т" => "t",
						"Ќ" => "Ḱ",
						"ќ" => "ḱ",
						"Ћ" => "Ć",
						"ћ" => "ć",
						"У" => "U",
						"у" => "u",
						"Ў" => "W",
						"ў" => "w",
						"Ф" => "F",
						"ф" => "f",
						"Х" => "X",
						"х" => "x",
						"Ц" => "C",
						"ц" => "c",
						"Ч" => "Č",
						"ч" => "č",
						"Џ" => "DŽ ",
						"џ" => "dž",
						"Ш" => "Š",
						"ш" => "š",
						"Щ" => "ŠČ ",
						"щ" => "šč",
						"Ъ" => "Ŭ",
						"ъ" => "ŭ",
						"Ы" => "Y",
						"ы" => "y",
						"Ь" => "Ĭ",
						"ь" => "ĭ",
						"Ѣ" => "Ä",
						"ѣ" => "ä",
						"Э" => "È",
						"э" => "è",
						"Ю" => "Ǔ",
						"ю" => "ǔ",
						"Я" => "Ǎ",
						"я" => "ǎ",
						"’" => "'",
						"Ѡ" => "Ô",
						"ѡ" => "ô",
						"Ѧ" => "Ę",
						"ѧ" => "ę",
						"Ѩ" => "JĘ ",
						"ѩ" => "ję",
						"Ѫ" => "Ǫ",
						"ѫ" => "ǫ",
						"Ѭ" => "JǪ ",
						"ѭ" => "jǫ",
						"Ѯ" => "Kˢ",
						"ѯ" => "kˢ",
						"Ѱ" => "Pˢ",
						"ѱ" => "pˢ",
						"Ѳ" => "Tʰ",
						"ѳ" => "tʰ",
						"Ѵ" => "Ü",
						"ѵ" => "ü",
					       },
				      'ALL' => {
						"–" => "–",
						"-" => "-",
						"\\." => ".",
						"،" => ",",
						"؛" => ";",
						"؟" => "?",
						"۰" => "0",
						"۱" => "1",
						"۲" => "2",
						"۳" => "3",
						"۴" => "4",
						"۵" => "5",
						"۶" => "6",
						"۷" => "7",
						"۸" => "8",
						"۹" => "9",
					       }
				     },
			    );

sub al_transcribe {
  my ($s,$slang,$tlang) = @_;
  $s =~ s/ / /g;
  die "ERROR: transcription from language $slang to language $tlang has not been implemented yet" unless defined $al_transcription_hash{$tlang}{$slang};
  if (defined($al_transcription_hash{$tlang}{ALL})) {
    for my $in (sort {length($b) <=> length($a)} keys %{$al_transcription_hash{$tlang}{ALL}}) {
      my $out = $al_transcription_hash{$tlang}{ALL}{$in};
      $s =~ s/$in/$out/g;
    }
  }
  for my $in (sort {length($b) <=> length($a)} keys %{$al_transcription_hash{$tlang}{$slang}}) {
    my $out = $al_transcription_hash{$tlang}{$slang}{$in};
    $s =~ s/$in/$out/g;
  }
  $s =~ s/([A-ZÇŞĞĘǪÂÊÎÔÛÄËÏÖÜŸŠČŘĎŤŇĚĽŁÁÉÍÓÚÝŹŚĆŔĹŃĬŬḰĴĠǴİ][A-ZÇŞĞĘǪÂÊÎÔÛÄËÏÖÜŸŠČŘĎŤŇĚĽŁÁÉÍÓÚÝŹŚĆŔĹŃĬŬḰĴĠǴİ][A-ZÇŞĞĘǪÂÊÎÔÛÄËÏÖÜŸŠČŘĎŤŇĚĽŁÁÉÍÓÚÝŹŚĆŔĹŃĬŬḰĴĠǴİ]) /$1/g;
  $s =~ s/([A-ZÇŞĞĘǪÂÊÎÔÛÄËÏÖÜŸŠČŘĎŤŇĚĽŁÁÉÍÓÚÝŹŚĆŔĹŃĬŬḰĴĠǴİ][A-ZÇŞĞĘǪÂÊÎÔÛÄËÏÖÜŸŠČŘĎŤŇĚĽŁÁÉÍÓÚÝŹŚĆŔĹŃĬŬḰĴĠǴİ]) ([A-ZÇŞĞĘǪÂÊÎÔÛÄËÏÖÜŸŠČŘĎŤŇĚĽŁÁÉÍÓÚÝŹŚĆŔĹŃĬŬḰĴĠǴİ])/$1$2/g;
  if ($tlang eq "tr") {
    $s =~ s/(.) /lc_tr($1)/ge;
  } else {
    $s =~ s/(.) /lc_ext($1)/ge;
  }
  return $s;
}

sub lc_tr {
  my $c = shift;
  $c =~ tr/Iİ/ıi/;
  $c = lc_ext($c);
  return lc($c);
}

sub lc_ext {
  my $c = shift;
  $c =~ tr/ÇŞĞĘǪÂÊÎÔÛÄËÏÖÜŸŠČŘĎŤŇĚĽŁÁÉÍÓÚÝŹŚĆŔĹŃĬŬḰĴĠǴ/çşğęǫâêîôûäëïöüÿščřďťňěľłáéíóúýźśćŕĺńĭŭḱĵġǵ/;
  return lc($c);
}

1;
